<html>

  <body>
    
    <h1>Test</h1>
    <script src="2darrays.js"></script>
    <script>
    var dimensions = [20, 20];
    document.write("dimensions: " + dimensions[0] + " by " + dimensions[1] + " units <br><br>");
    var numofitems = dimensions[0] * dimensions[1];
    var methodoptions = ["szudzik", "interleave", "triangle", "primefactor", "cantorpair", "bitwise", "hopullman"];
    var testerobject = {
      interleave: [],
      triangle: [],
      primefactor: [],
      cantorpair: [],
      bitwise: [],
      szudzik: [],
      hopullman: []
    };
    var times = {
      interleave: 0,
      triangle: 0,
      primefactor: 0,
      cantorpair: 0,
      bitwise: 0,
      szudzik: 0,
      hopullman: 0
    }
    var repeats = {
      interleave: 0,
      triangle: 0,
      primefactor: 0,
      cantorpair: 0,
      bitwise: 0,
      szudzik: 0,
      hopullman: 0
    }
    	for (var x = 0; x < dimensions[0]; x++) {
      	for (var y = 0; y < dimensions[1]; y++) {
          methodoptions.forEach(function(item) {
            var t0 = performance.now();
            var indexarray = tdarrayindex(x, y, item);
            var t1 = performance.now();
            times[item] += t1 - t0;
            
            document.write("(" + x + ", " + y + "): " + item + " -> " + tdarrayindex(x, y, item) + "<br>");
            if (testerobject[item][tdarrayindex(x, y, item)]) {
              repeats[item]++;
            }
            testerobject[item][tdarrayindex(x, y, item)] = "whatever.";
          });
          document.write("<br>");
        }
      }
      document.write("<br><br>Efficiencies (percentage of values assigned in first x * y indices of array; x * y is the amount of indices that were registered and the dimension of the x and y value block):");
      methodoptions.forEach(function(item) {
          var counter = 0;
          for (var d = 0; d < numofitems; d++) {
            if (testerobject[item][d]) {
              counter++;
            }
          }
        document.write("<br>" + item + ": " + (counter / numofitems) * 100 + "%");
      });
      document.write("<br><br>Performance:");
      methodoptions.forEach(function(item) {
        document.write("<br>" + item + ": " + (times[item] / numofitems) * 1000 + " microseconds");
      });
      document.write("<br><br>Repeat percentage (percentage of times a index was set more than once):");
      methodoptions.forEach(function(item) {
        document.write("<br>" + item + ": " + (repeats[item] / numofitems) * 100 + "%");
      });
    </script>
  </body>

</html>

